# Лабораторная работа: Основные задачи DBA в PostgreSQL

## 1. Цель работы

Студент научится выполнять базовые операции администратора базы данных: подключение к серверу, резервное копирование и восстановление базы данных, создание и использование индексов для оптимизации запросов.

## 2. Задачи работы

1. Изучить основные обязанности DBA в PostgreSQL.
2. На практике создать резервную копию базы данных и восстановить её в новую базу.
3. Создать индекс на таблице и оценить его влияние на скорость выполнения запроса.
4. Сформировать отчёт с описанием выполненных действий и результатами.

## 3. Исходные данные

* Предоставляется SQL-скрипт `lab_postgres_data.sql` для создания таблицы `products` с тестовыми данными.
* Доступ к серверу PostgreSQL (локально или через учебный контейнер/VM).

### Скрипт для создания таблицы и данных

```sql
-- Создание таблицы products
DROP TABLE IF EXISTS products;
CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    category VARCHAR(50),
    price NUMERIC(10,2),
    quantity INT
);

-- Вставка данных
INSERT INTO products (name, category, price, quantity) VALUES
('Laptop', 'Electronics', 1200.50, 10),
('Smartphone', 'Electronics', 800.00, 25),
('Desk Chair', 'Furniture', 150.75, 50),
('Notebook', 'Stationery', 3.50, 200),
('Pen', 'Stationery', 1.20, 500),
('Headphones', 'Electronics', 60.00, 40),
('Table', 'Furniture', 250.00, 15),
('Monitor', 'Electronics', 300.00, 20),
('Backpack', 'Accessories', 70.00, 35),
('Water Bottle', 'Accessories', 12.50, 100);
```

## 4. Пошаговое выполнение

1. **Подключение к базе данных**

   * Используя pgAdmin или psql, подключиться к предоставленной базе.
   * Сделать скриншот успешного подключения.

2. **Создание резервной копии базы**

   * Создать дамп базы командой `pg_dump`.
   * Сохранить файл резервной копии.
   * Сделать скриншот процесса создания.

3. **Восстановление базы из резервной копии**

   * Создать новую базу в PostgreSQL.
   * Восстановить данные из резервной копии командой `psql` или через pgAdmin.
   * Проверить, что таблица `products` и все данные восстановлены корректно.

4. **Создание индекса на таблице**

   * Создать индекс на колонке `name` таблицы `products`.
   * Выполнить тестовый SELECT-запрос до и после создания индекса, сравнить время выполнения.

5. **Анализ результатов**

   * Сравнить показатели скорости запроса с индексом и без него.
   * Сделать выводы о влиянии индекса на производительность.

## 5. Требования к оформлению отчёта

* Отчёт должен быть в формате `.doc` или `.docx`.
* Структура отчёта:

  1. Титульный лист
  2. Цель и задачи работы
  3. Пошаговое описание выполнения
  4. Скриншоты и результаты тестов
  5. Выводы и анализ влияния индекса
* Отчёт должен быть аккуратно оформлен, с нумерацией шагов и пояснениями.

## 6. Контроль знаний

* Студент защищает отчёт перед преподавателем.
* Во время защиты студент подробно объясняет каждый шаг: подключение, создание резервной копии, восстановление, создание индекса и анализ влияния на запрос.

## 7. Критерии оценки (100-балльная система)

| Критерий                    | Баллы | Описание                                                                                                         |
| --------------------------- | ----- | ---------------------------------------------------------------------------------------------------------------- |
| Полнота выполнения задания  | 0–30  | Все шаги задания выполнены и подробно описаны.                                                                   |
| Корректность действий       | 0–30  | Все операции выполнены правильно, база восстановлена корректно, индекс создан без ошибок.                        |
| Анализ результатов          | 0–25  | Правильно сравнен результат выполнения запроса до и после индекса, сделан вывод о влиянии на производительность. |
| Презентация отчёта и защита | 0–15  | Отчёт структурирован, скриншоты присутствуют, студент ясно объясняет каждый шаг.                                 |

**Максимальный балл:** 100.
